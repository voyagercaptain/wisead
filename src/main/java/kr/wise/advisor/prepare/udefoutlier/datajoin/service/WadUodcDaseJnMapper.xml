<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.wise.advisor.prepare.udefoutlier.datajoin.service.WadUodcDaseJnMapper">
	<resultMap id="BaseResultMap" type="kr.wise.advisor.prepare.udefoutlier.datajoin.service.WadUodcDaseJn" extends="kr.wise.commons.cmm.service.CommonMapper.BaseResultMap" >
		<id column="UDF_OTL_DTC_ID"      	jdbcType="VARCHAR" property="udfOtlDtcId" />
		<id column="CRE_COMP_ID"         	jdbcType="VARCHAR" property="creCompId"   />
		<result column="JN_TYP_CD"       	jdbcType="VARCHAR" property="jnTypCd"    />
		<result column="LEFT_ANA_DASE_ID"   jdbcType="VARCHAR" property="leftAnaDaseId"   />
		<result column="RIGHT_ANA_DASE_ID" 	jdbcType="VARCHAR" property="rightAnaDaseId" />
		<result column="ANA_DASE_ID"     	jdbcType="VARCHAR" property="anaDaseId"    />
		<result column="ANA_DASE_NM"		jdbcType="VARCHAR" property="anaDaseNm" />
	</resultMap>
  
	<select id="selectDetailInfo" parameterType="map" resultMap="BaseResultMap">
		SELECT A.UDF_OTL_DTC_ID
	         , A.CRE_COMP_ID
	         , A.JN_TYP_CD
	         , A.LEFT_ANA_DASE_ID
	         , A.RIGHT_ANA_DASE_ID
	         , A.ANA_DASE_ID
	         , B.ANA_DASE_NM 
	     FROM WAD_UODC_DASE_JN A
	          LEFT JOIN WAD_UODC_ANA_DASE B
	            ON B.ANA_DASE_ID = A.ANA_DASE_ID
	    WHERE A.UDF_OTL_DTC_ID = #{udfOtlDtcId,jdbcType=VARCHAR}
	      AND A.CRE_COMP_ID    = #{creCompId,jdbcType=VARCHAR}
	</select>
	
	<update id="updateDaseJn" parameterType="kr.wise.advisor.prepare.udefoutlier.datajoin.service.WadUodcDaseJn">
		UPDATE WAD_UODC_DASE_JN
		<set>
			<if test="jnTypCd != null">
				JN_TYP_CD = #{jnTypCd,jdbcType=VARCHAR},
			</if>
			<if test="leftAnaDaseId != null">
				LEFT_ANA_DASE_ID = #{leftAnaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="rightAnaDaseId != null">
				RIGHT_ANA_DASE_ID = #{rightAnaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="anaDaseId != null">
				ANA_DASE_ID = #{anaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="objDescn != null">
				OBJ_DESCN = #{objDescn,jdbcType=VARCHAR},
			</if>
			<if test="objVers != null">
				OBJ_VERS = #{objVers,jdbcType=VARCHAR},
			</if>
			<if test="regTypCd != null">
				REG_TYP_CD = #{regTypCd,jdbcType=VARCHAR},
			</if>
			<if test="writUserId != null">
				WRIT_USER_ID = #{writUserId,jdbcType=VARCHAR},
			</if>
			<if test="writDtm != null">
				WRIT_DTM = #{writDtm,jdbcType=TIMESTAMP},
			</if>
		</set>
		WHERE UDF_OTL_DTC_ID = #{udfOtlDtcId,jdbcType=VARCHAR}
	      AND CRE_COMP_ID    = #{creCompId,jdbcType=VARCHAR}
	</update>
	
	<insert id="insertDaseJn" parameterType="kr.wise.advisor.prepare.udefoutlier.datajoin.service.WadUodcDaseJn">
		INSERT INTO WAD_UODC_DASE_JN
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="udfOtlDtcId != null">
				UDF_OTL_DTC_ID,
			</if>
			<if test="creCompId != null">
				CRE_COMP_ID,
			</if>
			<if test="jnTypCd != null">
				JN_TYP_CD,
			</if>
			<if test="leftAnaDaseId != null">
				LEFT_ANA_DASE_ID,
			</if>
			<if test="rightAnaDaseId != null">
				RIGHT_ANA_DASE_ID,
			</if>
			<if test="anaDaseId != null">
				ANA_DASE_ID,
			</if>
			<if test="objDescn != null">
				OBJ_DESCN,
			</if>	      
		        OBJ_VERS,      
		        REG_TYP_CD,      
		        WRIT_USER_ID,      
		        WRIT_DTM 
	    </trim>
	    <trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="udfOtlDtcId != null">
				#{udfOtlDtcId,jdbcType=VARCHAR},
			</if>
			<if test="creCompId != null">
				#{creCompId,jdbcType=VARCHAR},
			</if>
			<if test="jnTypCd != null">
				#{jnTypCd,jdbcType=VARCHAR},
			</if>
			<if test="leftAnaDaseId != null">
				#{leftAnaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="rightAnaDaseId != null">
				#{rightAnaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="anaDaseId != null">
				#{anaDaseId,jdbcType=VARCHAR},
			</if>
			<if test="objDescn != null">
				#{objDescn,jdbcType=VARCHAR},
			</if>
	        1,
	       'C',      
	        #{writUserId,jdbcType=VARCHAR},      
	        now() 
	    </trim>
	</insert>
	
	<delete id="deleteByPrimaryKey" parameterType="map">
	    delete from WAD_UODC_DASE_JN
	    where UDF_OTL_DTC_ID = #{udfOtlDtcId,jdbcType=VARCHAR}
	      and CRE_COMP_ID = #{creCompId,jdbcType=VARCHAR}
	</delete>
	
	<delete id="deleteByUdfOtlDtcId" parameterType="map">
	    delete from WAD_UODC_DASE_JN
	    where UDF_OTL_DTC_ID = #{udfOtlDtcId,jdbcType=VARCHAR}
	</delete>
</mapper>